<!-- <iframe src="https://www.google.com/maps/embed?pb=!1m18!1m12!1m3!1d3306.1384027818885!2d-118.2717510844215!3d34.04032068060918!2m3!1f0!2f0!3f0!3m2!1i1024!2i768!4f13.1!3m3!1m2!1s0x80c2c7c76a01ef3d%3A0xf629c020e23429b5!2sLos+Angeles+Convention+Center!5e0!3m2!1sen!2sus!4v1511828760973" width="600" height="450" frameborder="0" style="border:0" allowfullscreen></iframe> -->

<style>
  /* Always set the map height explicitly to define the size of the div
     * element that contains the map. */

  #map {
    height: 500px;
  }
  /* Optional: Makes the sample page fill the window. */
</style>


<div id='map'></div>
<script>
  var map;

  function initMap() {
    console.log("WORK")
    map = new google.maps.Map(document.getElementById('map'), {
      center: { lat: -34.397, lng: 150.644 },
      zoom: 8
    });

    let itinerary = [
            { name: "Grand Park", coordinates: { lat: 34.0452385, lng: -118.2697483 }, blurb: "Grand Park is a 12-acre park located in the civic center of Los Angeles, California. It is part of the larger Grand Avenue Project, with its first phase having opened in July 2012.", startTime: 1511992800, endTime: 1512009000 },
            { name: "Pink Martini at The Theatre at Ace Hotel", coordinates: { lat: 34.0439463, lng: -118.263255 }, blurb: "Intricately restored Spanish Gothic-style theater from 1927 for concerts, talks & more.", startTime: 1512018000, endTime: 1512027000 },
            { name: "Drinks at The Standard", coordinates: { lat: 34.0451711, lng: -118.2680174 }, blurb: "Hip hotel in Downtown, offering a lively rooftop bar, beer garden & pool, plus a 24-hour restaurant.", startTime: 1512027901, endTime: 1512036043 }
        ]

    for(var i = 0; i < itinerary.length; i++){
      addMarker(itinerary[i])
    }

    function addMarker(prop) {
      let marker = new google.maps.Marker({
        map: map,
        draggable: true,
        animation: google.maps.Animation.DROP,
        position: prop.coordinates
      });
    }

    angular.element(document).scope().$broadcast('mapLoader')
  }
</script>

<script src="https://maps.googleapis.com/maps/api/js?key=AIzaSyDety0jWntP5GRs8rfL3ThOYYS-hg1-WZY&callback=initMap" async
  defer></script>